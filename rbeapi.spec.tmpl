# -*- rpm-spec -*-
%global gem_name rbeapi

Name:		rubygem-%{gem_name}
Version:	REPLACEME
Release:	1.eos4
Summary:	Arista eAPI Ruby Library for the EOS command API

Group:		Development/Languages
License:    New BSD
URL:		https://github.com/arista-eosplus/rbeapi
Source0:	%{gem_name}-%{version}.gem

#%%global gemdir %(ruby -rubygems -e 'puts Gem::dir' 2>/dev/null)
%global gemdir /opt/puppet/lib/ruby/gems/1.9.1
%global geminstdir %{gemdir}/gems/%{gemname}-%{version}
#Requires: ruby(abi) = %{rubyabi}
Requires: ruby(abi)
Requires: ruby(rubygems)
Requires: ruby
Requires: rubygem(net_http_unix)
Requires: rubygem(inifile)
#Provides:       ruby(%{gem_name}) = %{version}-%{release}
Provides:       rubygem(%{gem_name}) = %{version}

BuildArch: noarch

%description
The Ruby Cliet for eAPI provides a native Ruby implementation for programming
Arista EOS network devices using Ruby. The Ruby client provides the ability
to build native applications in Ruby that can communicate with EOS either
locally via Unix domain sockets (on-box) or remotely over a HTTP/S transport
(off-box). It uses a standard INI-style configuration file to specifiy one or
more connection profiles.

The rbeapi implemenation also provides an API layer for building native Ruby
objects that allow for configuration and state extraction of EOS nodes. The API
layer provides a consistent implementation for working with EOS configuration
resources. The implementation of the API layer is highly extensible and can be
used as a foundation for building custom data models.

The libray is freely provided to the open source community for building robust
applications using Arista EOS eAPI. Support is provided as best effort through
Github iusses.

%prep
%setup -q -D -T -n  .

%install
install %{SOURCE0} %{buildroot}/

%files
/%{gem_name}-%{version}.gem

%post
export PATH=/opt/puppet/bin:${PATH}
gem install --local /%{gem_name}-%{version}.gem > /dev/null 2>&1

%preun
export PATH=/opt/puppet/bin:${PATH}
gem uninstall %{gem_name} --version '= %{version}' > /dev/null 2>&1

%changelog
* Tue Mar 17 2015 Jere Julian - 0.1.0-1
- Initial package
